<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{base :: page_head(pageTitle='Login/Register')}"></head>
<body>
  <header th:replace="~{base :: navbar}"></header>
  <header th:replace="~{base :: searchbar}"></header>
  <div th:replace="~{base :: searchOverlay}"></div>

  <div class="body">
    <div class="wrapper">
      <span class="bg1"></span>
  
      <div class="form-wrapper login">
        <h2 class="title">Login</h2>
        <div th:if="${param.error}" class="text-red-500 text-sm mt-2">
          <p>Error: Invalid email or password.</p>
          <script>
            //clear the query string after displaying the error message
            window.history.replaceState({}, document.title, window.location.pathname);
          </script>
        </div>
        
        <form action="/signin" method="post" th:action="@{/signin}">
          <div class="input-box">
            <input type="email" name="email" required>
            <label for="">Email</label>
          </div>
          <div class="input-box">
            <input type="password" name="password" required>
            <label for="">Password</label>
          </div>
          <div class="remember-me">
            <input type="checkbox" name="rememberMe" id="rememberMe">
            <label for="rememberMe">Remember me</label>
          </div>
          <!-- CSRF Token - Spring Security yêu cầu -->
          <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
          <div class="flex justify-center col-span-2 mt-4">
            <button type="submit" class="contact-btn">
              <span class="contact-btn-text">Login</span>
            </button>
          </div>
          <div class="link">
            <p>
              Don't have an account? <a href="#" class="signup-link">SignUp</a>
            </p>
          </div>
          <div class="link">
            <p>
              Forgot your password? <a href="/forgot-password" class="signup-link">Reset password</a>
            </p>
          </div>
        </form>
      </div>
  
      <div class="info-wrapper login">
        <h2>Welcome Back</h2>
        <p>Login into your account to access our services</p>
      </div>
  
      <span class="bg2"></span>
      
      <div class="form-wrapper register">
        <h2 class="title">Signup</h2>
        <form action="#">
          <div class="input-box">
            <input type="email" required />
            <label for="">Email</label>
          </div>
          <div class="input-box">
            <input type="password" required />
            <label for="">Password</label>
          </div>
          <div class="input-box">
            <input type="password" required />
            <label for="">Confirm Password</label>
          </div>

          <div class="flex justify-center col-span-2 mt-4">    
            <button class="contact-btn">
                <span class="contact-btn-text">Register</span>
            </button>
          </div>

          <div class="link">
            <p>
              Already have an account? <a href="#" class="login-link">Login</a>
            </p>
          </div>
        </form>
      </div>
  
      <div class="info-wrapper register">
        <h2>Welcome!</h2>
        <p>Create your account to access our services</p>
      </div>
    </div>
  </div>

  <script src="js/switch.js"></script>

  <footer th:replace="~{base :: footer}"></footer>
  <div th:replace="~{base :: copyright}"></div>

  <script src="/js/searchbar.js"></script>
  
</body>
</html>